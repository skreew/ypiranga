<!DOCTYPE html>
<html lang="pt-BR" class=""> <!-- A classe 'dark' é controlada via JS -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cardápio digital do CAFÉ YPIRANGA. Veja nossos cafés, lanches, porções e muito mais.">
    <meta name="keywords" content="café, cafeteria, lanches, cardápio digital, CAFÉ YPIRANGA, tailwind css">
    <meta name="author" content="CAFÉ YPIRANGA">
    <title>Cardápio Digital - CAFÉ YPIRANGA</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome para Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        /* Estilos customizados que complementam o Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Animação para o Modal */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        /* Scrollbar customizada para o menu de categorias */
        #category-nav::-webkit-scrollbar { height: 4px; }
        #category-nav::-webkit-scrollbar-track { background: transparent; }
        #category-nav::-webkit-scrollbar-thumb {
            background-color: #FFD100; /* Ipiranga Yellow */
            border-radius: 20px;
        }
    </style>
</head>
<body class="bg-stone-50 dark:bg-gray-900 text-gray-800 dark:text-stone-200 transition-colors duration-300">

    <!-- ========== HEADER ========== -->
    <header id="header" class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-md sticky top-0 z-40 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-3">
                <!-- Informações da Empresa -->
                <div class="flex items-center min-w-0">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSstW2GDUT9pYlm_O6_a0qewvhTtHI4W7X6XQ&s" alt="Logo do CAFÉ YPIRANGA" class="w-12 h-12 rounded-full mr-4 border-2 border-stone-200 dark:border-gray-600 flex-shrink-0 object-cover">
                    <div class="min-w-0">
                        <h1 class="text-xl sm:text-2xl font-bold text-[#0033A0] dark:text-[#FFD100] truncate">CAFÉ YPIRANGA</h1>
                        <div class="flex items-center space-x-4 mt-1">
                            <a href="https://api.whatsapp.com/send?phone=554532681492" target="_blank" aria-label="WhatsApp" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-whatsapp text-xl"></i></a>
                            <a href="https://www.instagram.com/postorabaioli" target="_blank" aria-label="Instagram" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-instagram text-xl"></i></a>
                            <a href="https://www.facebook.com/Posto Rabaioli" target="_blank" aria-label="Facebook" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-facebook-f text-xl"></i></a>
                        </div>
                    </div>
                </div>

                <!-- Seletor de Tema -->
                <label for="theme-toggle" class="relative inline-flex items-center cursor-pointer flex-shrink-0 ml-2">
                    <input type="checkbox" value="" id="theme-toggle" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 dark:peer-focus:ring-yellow-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#0033A0]"></div>
                </label>
            </div>
        </div>

        <!-- Navegação de Categorias -->
        <nav id="category-nav" class="bg-[#0033A0] dark:bg-blue-900/80 overflow-x-auto whitespace-nowrap shadow-inner">
            <div id="category-links" class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 flex list-none py-2 space-x-2">
                <!-- Links de categoria serão inseridos aqui pelo JS -->
            </div>
        </nav>
    </header>

    <!-- ========== CONTEÚDO PRINCIPAL ========== -->
    <main id="menu-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <!-- Seções e produtos serão inseridos aqui pelo JS -->
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="bg-gray-800 dark:bg-black text-gray-300 dark:text-gray-400 py-6 text-center">
        <p>&copy; 2024 CAFÉ YPIRANGA. Todos os direitos reservados.</p>
        <p class="text-xs mt-1">Desenvolvido com ❤️</p>
    </footer>

    <!-- ========== BOTÃO VOLTAR AO TOPO ========== -->
    <button id="back-to-top" aria-label="Voltar ao topo" class="hidden fixed bottom-5 right-5 bg-[#0033A0] hover:bg-blue-800 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-lg cursor-pointer z-50 transition-all duration-300 active:scale-90">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- ========== MODAL DE PRODUTO ========== -->
    <div id="product-modal" class="hidden fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4">
        <div id="modal-content" class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full relative p-6 m-4">
            <button class="close-button absolute top-3 right-4 text-gray-500 dark:text-gray-400 text-3xl font-bold hover:text-black dark:hover:text-white cursor-pointer">&times;</button>
            <img id="modal-image" src="" alt="Imagem do Produto" class="w-full h-64 object-cover rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x260/EEE/333?text=Imagem+Indisponível';">
            <h3 id="modal-name" class="text-3xl font-bold mb-2 text-[#0033A0] dark:text-[#FFD100]"></h3>
            <p id="modal-description" class="text-base text-gray-600 dark:text-gray-400 mb-4 min-h-[40px]"></p>
            <span id="modal-price" class="price text-2xl font-bold text-[#0033A0] dark:text-[#FFD100]"></span>
        </div>
    </div>
    
    <!-- Template para o cartão de produto. É mais eficiente e limpo. -->
    <template id="product-card-template">
        <div class="product-card bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1.5 transition-all duration-300 cursor-pointer group active:scale-95">
            <img loading="lazy" alt="" class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300" onerror="this.onerror=null;this.src='https://placehold.co/300x200/EEE/333?text=Imagem';">
            <div class="p-5">
                <h3 class="text-xl font-semibold mb-2 truncate"></h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3 min-h-[40px]"></p>
                <span class="price text-2xl font-bold text-[#0033A0] dark:text-[#FFD100]"></span>
            </div>
        </div>
    </template>


    <!-- ========== SCRIPT ========== -->
    <script>
    // IIFE (Immediately Invoked Function Expression) para encapsular o código e não poluir o escopo global.
    (() => {
        const menuData = {
            "Cafés": {"emoji": "☕️", "items": [{"name":"ESPRESSO","description":"Café puro","price":"R$ 9,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/a2073e59-6ea5-4f7d-a523-5a986f3fed6d.webp"},{"name":"EXPRESSO DUPLO","description":"Duplo expresso","price":"R$ 11,00","image":"https://placehold.co/300x200/EEE/333?text=Expresso+Duplo"},{"name":"COADINHO","description":"Café coado","price":"R$ 9,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/50257f13-0013-41f1-8f16-289caee159c6.webp"},{"name":"CAFÉ COM LEITE","description":"Café expresso com leite","price":"R$ 10,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/d16c689d-ea67-40db-a0b8-6d205c3884a9.webp"},{"name":"MACCHIATO","description":"Duplo expresso e espuma de leite vaporizado.","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/b32fc7af-df30-46c4-b038-c07a98fc1ba7.webp"}]},
            "Cappuccinos": {"emoji": "☕️", "items": [{"name":"TRADICIONAL","description":"Café, leite vaporizado e canela","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/8238a6b1-78f0-41ca-a84b-61cbb0f06d5c.webp"},{"name":"BRASILEIRO","description":"Café, chocolate, leite vaporizado e canela","price":"R$ 13,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f0566d3f-6448-44e7-b52d-e38ac795849a.webp"},{"name":"NUTELLA","description":"Café, leite vaporizado, canela e nutella","price":"R$ 14,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/1ea71e88-1951-4d12-a4bd-098336bca706.webp"}]},
            "Especiais": {"emoji": "⭐", "items": [{"name":"MOCHA CARAMELO","description":"Café, calda de caramelo e leite vaporizado","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/d1c92e5a-4d67-445d-be9e-f94e9a70776c.webp"},{"name":"MOCHA CHOCOLATE","description":"Café, calda de chocolate e leite vaporizado","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f8c80c9a-1c4f-49b3-84b4-b23a9e850466.webp"},{"name":"MOCHA MARSHMALLOW","description":"Café, calda de chocolate, leite vaporizado e marshmallow maçaricado","price":"R$ 15,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/3ae3dbeb-05c8-4b58-8965-a72732e5f439.webp"},{"name":"CAFÉ RABAIOLI","description":"Café, licor baileys, leite vaporizado e chantilly","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/06e8d11a-81a0-4a3e-91f0-d47ff2bc0903.webp"},{"name":"IRISH COFFEE","description":"Café, whisky irlandês, açúcar mascavo e chantilly","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/fd677f75-143d-4191-a5c7-70ca29b8ccd1.webp"},{"name":"SUBMARINO","description":"Chocolate quente, whisky, chantilly e lascas de chocolate","price":"R$ 22,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/ec3a91ab-8160-413f-92ab-db7b9dda9597.webp"}]},
            "Chocolates": {"emoji": "🍫", "items": [{"name":"CHOCOLATE EUROPEU","description":"Leite e chocolate europeu","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f5d40bef-fff7-427c-b7a5-b37feea67981.webp"},{"name":"CHOCOLATE EUROPEU COM NUTELLA","description":"Leite, chocolate europeu e nutella nas bordas","price":"R$ 20,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/6425809b-a741-438d-b1ff-8a3c2f89f407.webp"},{"name":"ACHOCOLATADO","description":"Leite quente ou frio e chocolate em pó","price":"R$ 9,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/e45a0dd8-929b-49a0-ae33-848e7bf615a3.webp"}]},
            "Chás": {"emoji": "🍵", "items": [{"name":"CAMOMILA","description":"Infusão suave e calmante de flores de camomila, ideal para relaxar a qualquer hora do dia.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/7205cf78-45ff-4e3c-9133-5b8d3f4d0767.webp"},{"name":"ABACAXI COM HORTELÃ","description":"Uma combinação refrescante e digestiva, perfeita para depois das refeições.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/ec3176a0-3fbc-4fcb-b60e-38e3c1385fd7.webp"},{"name":"GENGIBRE COM ESPECIARIAS","description":"Chá aromático e levemente picante com gengibre e uma seleção de especiarias.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/ad3e7afc-a55c-4d45-a1f1-9db2963f560c.webp"},{"name":"FRUTAS VERMELHAS","description":"Uma infusão vibrante e antioxidante com o delicioso sabor de um mix de frutas vermelhas.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/c7014903-4f08-4b41-8123-e76a017569cf.webp"},{"name":"ERVA DOCE E ESPECIARIAS","description":"Chá aromático de erva doce e uma seleção de especiarias, ótimo para aquecer.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/d02f3692-288a-4400-b609-fc938f2f84f0.webp"},{"name":"CHAI LATTE","description":"Bebida tradicional indiana que combina chá preto aromático, leite vaporizado e especiarias.","price":"R$ 13,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/a3bdd1a6-2e4c-4ffb-b55c-26915b01e9bb.webp"}]},
            "Cafés Gelados": {"emoji": "🧊", "items": [{"name":"AFFOGATO","description":"Café, sorvete de creme, ovomaltine e chantilly.","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/a4f8da25-e26b-43ad-a18a-ecf9c4eac4d8.webp"},{"name":"ESPRESSO COM TÔNICA","description":"Café expresso e água tonica","price":"R$ 14,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/e3a99484-6eb6-4e8c-82b8-1fc46a812a98.webp"},{"name":"CAPPUCCINO GELADO","description":"Leite gelado e mistura para cappuccino gelado","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/4498eddf-9ae6-4c73-8e13-cb27574f977d.webp"},{"name":"RABAIOLI FREDO","description":"Nosso cappuccino gelado especial, com sorvete de creme, calda de chocolate e ovomaltine.","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/e973b520-93ea-45ae-ac92-f557cd68546e.webp"}]},
            "Sucos": {"emoji": "�", "items": [{"name":"ABACAXI","description":"Suco puro e refrescante de abacaxi, uma explosão tropical de sabor.","price":"R$ 14,00","image":"https://placehold.co/300x200/EEE/333?text=Abacaxi"},{"name":"ABACAXI E HORTELÃ","description":"A combinação clássica e revigorante do abacaxi com o toque fresco da hortelã.","price":"R$ 14,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/7d886e0e-89da-4986-b259-eade23cd5a66.webp"},{"name":"LIMÃO","description":"Suco cítrico e refrescante de limão espremido na hora, perfeito para matar a sede.","price":"R$ 14,00","image":"https://placehold.co/300x200/EEE/333?text=Limão"},{"name":"LARANJA","description":"Puro suco de laranja natural, rico em vitamina C e sabor.","price":"R$ 14,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/c9bfd3ed-fafd-46a7-96c8-1684586a3404.webp"},{"name":"MARACUJÁ","description":"Suco calmante e saboroso de maracujá fresco, ideal para relaxar.","price":"R$ 14,00","image":"https://placehold.co/300x200/EEE/333?text=Maracujá"},{"name":"MORANGO","description":"Delicioso e vibrante suco de morangos frescos e selecionados.","price":"R$ 14,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/3a2c4a53-22c5-4bd9-b7c5-e248ccf8cdb4.webp"},{"name":"LARANJA COM MORANGO","description":"A doçura do morango encontra a acidez da laranja numa combinação perfeita.","price":"R$ 15,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/ef87098b-2f3f-43f8-9fb9-9b61f7f3e716.webp"},{"name":"FRUTAS VERMELHAS","description":"Um mix antioxidante e delicioso de suco com nossas melhores frutas vermelhas.","price":"R$ 15,00","image":"https://placehold.co/300x200/EEE/333?text=Frutas+Vermelhas"}]},
            "Frapês": {"emoji": "🥤", "items": [{"name":"Baunilha","description":"A suavidade clássica da baunilha em uma bebida gelada e cremosa.","price":"R$ 23,00","image":"https://placehold.co/300x200/EEE/333?text=Baunilha"},{"name":"Cappuccino","description":"Seu cappuccino favorito transformado em um frapê gelado e delicioso.","price":"R$ 23,00","image":"https://placehold.co/300x200/EEE/333?text=Cappuccino"},{"name":"Morango","description":"A doçura do morango em uma textura de frapê incrivelmente refrescante.","price":"R$ 23,00","image":"https://placehold.co/300x200/EEE/333?text=Morango"},{"name":"Maracujá","description":"O sabor tropical e levemente ácido do maracujá em um frapê cremoso.","price":"R$ 23,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/31bdc343-8306-42f3-8ebf-ae1d7790b5bf.webp"},{"name":"Menta com limão","description":"Uma explosão de frescor com a combinação vibrante de menta e limão.","price":"R$ 23,00","image":"https://placehold.co/300x200/EEE/333?text=Menta+Limão"},{"name":"Frutas vermelhas","description":"Um mix delicioso e gelado das nossas melhores frutas vermelhas.","price":"R$ 23,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/4279afe5-88b8-4bec-9f2c-17bf9a103ef6.webp"},{"name":"Chocolate","description":"Para os amantes de chocolate, um frapê rico, cremoso e irresistível.","price":"R$ 23,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/13581447-5ba1-438e-8ed5-7bfb16529a6a.webp"},{"name":"Nutella","description":"Aveludado frapê com o sabor inconfundível de Nutella. Pura tentação!","price":"R$ 26,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/39201254-9c1d-435d-958e-d98c0cfc928b.webp"}]},
            "Lanches": {"emoji": "🍔", "items": [{"name":"PRIME BURGUER","description":"Hambúrguer Artesanal 150g, defumado, pão brioche, maionese da casa e mussarela.","price":"R$ 28,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/1d563520-9fe6-417a-ba2d-2d966175b4ca.webp"},{"name":"COMBO PRIME BURGUER","description":"Prime Burger + 100g de batata supercrisp + Coca-Cola 250ml.","price":"R$ 39,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/73101548-e33c-4ed3-97fe-7d7cf4b020a6.webp"},{"name":"SANDUICHE IPIRANGA","description":"Pulled pork, maionese especial da casa e queijo derretido, servido em pão baguete crocante.","price":"R$ 24,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/c6666f83-bcaa-470e-b334-53d42d1e0bf7.webp"},{"name":"COMBO IPIRANGA","description":"Sanduíche Ipiranga + 100g de batatas fritas + Coca-Cola 250ml.","price":"R$ 35,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/ef3dace9-e257-41c4-be76-1044ae8e3f55.webp"},{"name":"EMPADÃO DE FRANGO CATUPIRY","description":"Empadão cremoso de frango com Catupiry.","price":"R$ 15,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f2af3d79-fc9e-46ad-98fd-06e1edf75487.webp"}]},
            "Pizzas": {"emoji": "🍕", "items": [{"name":"PORTUGUESA","description":"Molho de tomate, mussarela, presunto, ovos, azeitona verde, cebola e orégano.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/10920976-cf74-4945-9ea2-abe6b0578890.webp"},{"name":"QUATRO QUEIJOS","description":"Molho de tomate, mussarela, gorgonzola, provolone e catupiry.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/79df672b-9de7-49ce-a3be-a546f98adb31.webp"},{"name":"RÚCULA COM TOMATE SECO","description":"Molho de tomate, mussarela, rúcula e tomate seco.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/366a7444-06e0-4502-a0f3-f1df7ec8be68.webp"},{"name":"FRANGO COM CATUPIRY","description":"Molho de tomate, mussarela, frango desfiado, catupiry e milho.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/5e121bda-fc37-4aaa-b625-9854327d4f58.webp"},{"name":"CALABRESA","description":"Molho de tomate, mussarela, calabresa.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/fc3c14dc-d338-4b4e-af03-5e53d7a4c67d.webp"},{"name":"SENSAÇÃO","description":"Mussarela, chocolate preto, morango e leite condensado.","price":"R$ 65,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/25dcf441-1c61-4949-ab38-4495d3fd277a.webp"}]}
        };

        // --- FUNÇÕES DE RENDERIZAÇÃO E CRIAÇÃO ---

        /** Gera o ID de uma categoria para ser usado em seletores CSS. Ex: "Cafés Gelados" -> "cafes-gelados" */
        const generateCategoryId = (name) => name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(/\s+/g, '-');

        /** Renderiza o menu completo (links, seções e produtos) na página. */
        const renderMenu = () => {
            const menuContainer = document.getElementById('menu-container');
            const categoryLinksContainer = document.getElementById('category-links');
            const productCardTemplate = document.getElementById('product-card-template');

            // Limpa containers para evitar duplicatas se a função for chamada novamente
            menuContainer.innerHTML = '';
            categoryLinksContainer.innerHTML = '';
            
            for (const categoryName in menuData) {
                const category = menuData[categoryName];
                const categoryId = generateCategoryId(categoryName);

                // 1. Cria e adiciona o link na barra de navegação
                const navLink = document.createElement('a');
                navLink.href = `#${categoryId}`;
                navLink.className = "block shrink-0 py-2 px-4 text-white font-medium rounded-full transition-all duration-300 hover:bg-[#FFD100] hover:text-[#0033A0]";
                navLink.innerHTML = `${category.emoji} ${categoryName}`;
                categoryLinksContainer.appendChild(navLink);

                // 2. Cria a seção da categoria
                const section = document.createElement('section');
                section.id = categoryId;
                // O padding e margin negativos são para compensar o header fixo e garantir que a âncora pule para o lugar certo.
                section.className = 'category-section pt-28 -mt-28 mb-12 scroll-mt-28';
                
                // 3. Cria o título da seção
                const title = document.createElement('h2');
                title.className = 'text-3xl font-bold mb-8 pb-2 border-b-2 border-[#0033A0] dark:border-[#FFD100]';
                title.innerHTML = `${category.emoji} ${categoryName}`;
                section.appendChild(title);

                // 4. Cria o grid para os produtos
                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:gap-8';
                
                // 5. Adiciona os produtos ao grid
                category.items.forEach(product => {
                    const cardClone = productCardTemplate.content.cloneNode(true);
                    const cardElement = cardClone.querySelector('.product-card');

                    // Armazena os dados no elemento para uso no modal
                    cardElement.dataset.name = product.name;
                    cardElement.dataset.description = product.description;
                    cardElement.dataset.price = product.price;
                    cardElement.dataset.image = product.image;

                    // Preenche os elementos do cartão
                    cardElement.querySelector('img').src = product.image;
                    cardElement.querySelector('img').alt = product.name;
                    cardElement.querySelector('h3').textContent = product.name;
                    cardElement.querySelector('p').textContent = product.description;
                    cardElement.querySelector('.price').textContent = product.price;
                    
                    grid.appendChild(cardElement);
                });
                section.appendChild(grid);
                menuContainer.appendChild(section);
            }
        };


        // --- FUNÇÕES DE INICIALIZAÇÃO DE EVENTOS ---
        
        /** Controla o seletor de tema (claro/escuro) */
        const initTheme = () => {
            const themeToggle = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;

            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    htmlElement.classList.add('dark');
                    themeToggle.checked = true;
                } else {
                    htmlElement.classList.remove('dark');
                    themeToggle.checked = false;
                }
            };
            
            themeToggle.addEventListener('change', () => {
                const newTheme = htmlElement.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });

            // Aplica o tema inicial baseado no localStorage ou preferência do sistema
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            applyTheme(savedTheme || (systemPrefersDark ? 'dark' : 'light'));
        };

        /** Controla o modal de produto */
        const initModal = () => {
            const modal = document.getElementById('product-modal');
            const modalContent = document.getElementById('modal-content');
            const closeModalButton = modal.querySelector('.close-button');
            const menuContainer = document.getElementById('menu-container');

            const openModal = (card) => {
                document.getElementById('modal-image').src = card.dataset.image;
                document.getElementById('modal-image').alt = `Imagem de ${card.dataset.name}`;
                document.getElementById('modal-name').textContent = card.dataset.name;
                document.getElementById('modal-description').textContent = card.dataset.description;
                document.getElementById('modal-price').textContent = card.dataset.price;
                modal.classList.remove('hidden');
                modalContent.classList.add('animate-fade-in');
            };

            const closeModal = () => {
                modal.classList.add('hidden');
                modalContent.classList.remove('animate-fade-in');
            };
            
            // Event Delegation: um único listener no container principal
            menuContainer.addEventListener('click', (event) => {
                const card = event.target.closest('.product-card');
                if (card) {
                    openModal(card);
                }
            });

            closeModalButton.addEventListener('click', closeModal);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) closeModal(); // Fecha se clicar no fundo
            });
            window.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        };

        /** Controla o botão "Voltar ao Topo" */
        const initBackToTopButton = () => {
            const backToTopButton = document.getElementById('back-to-top');
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.remove('hidden');
                } else {
                    backToTopButton.classList.add('hidden');
                }
            });

            backToTopButton.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        };

        /** Controla o destaque do link da categoria ativa na navegação */
        const initScrollObserver = () => {
            const header = document.getElementById('header');
            const categoryNav = document.getElementById('category-nav');
            const sections = document.querySelectorAll('.category-section');
            const navLinks = document.querySelectorAll('#category-links a');

            if (!header || !categoryNav || sections.length === 0 || navLinks.length === 0) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        const activeLink = document.querySelector(`#category-links a[href="#${id}"]`);
                        
                        // Remove a classe ativa de todos os links
                        navLinks.forEach(link => {
                           link.classList.remove('bg-[#FFD100]', 'text-[#0033A0]', 'dark:bg-yellow-400', 'dark:text-blue-900', 'shadow-md');
                        });
                        
                        // Adiciona a classe ao link ativo
                        if (activeLink) {
                            activeLink.classList.add('bg-[#FFD100]', 'text-[#0033A0]', 'dark:bg-yellow-400', 'dark:text-blue-900', 'shadow-md');
                            // Faz a barra de navegação rolar para que o link ativo fique visível
                            activeLink.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                        }
                    }
                });
            }, {
                rootMargin: `-${header.offsetHeight}px 0px -40% 0px`,
                threshold: 0.1
            });

            sections.forEach(section => observer.observe(section));
        };
        
        // --- PONTO DE PARTIDA ---
        // Garante que o DOM está pronto antes de executar os scripts
        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            initTheme();
            initModal();
            initBackToTopButton();
            initScrollObserver();
        });

    })();
    </script>
</body>
</html>
�
