<!DOCTYPE html>
<html lang="pt-BR" class=""> <!-- A classe 'dark' é controlada via JS -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cardápio digital do CAFÉ YPIRANGA. Veja nossos cafés, lanches, porções e muito mais.">
    <meta name="keywords" content="café, cafeteria, lanches, cardápio digital, CAFÉ YPIRANGA, tailwind css">
    <meta name="author" content="CAFÉ YPIRANGA">
    <title>Cardápio Digital - CAFÉ YPIRANGA</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome para Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        /* Estilos customizados que complementam o Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Animações para Modais e Gaveta */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        .animate-slide-in { animation: slideIn 0.3s ease-out; }
        
        /* Scrollbar customizada para o menu de categorias (desktop) */
        #category-nav::-webkit-scrollbar { height: 4px; }
        #category-nav::-webkit-scrollbar-track { background: transparent; }
        #category-nav::-webkit-scrollbar-thumb {
            background-color: #FFD100; /* Ipiranga Yellow */
            border-radius: 20px;
        }
    </style>
</head>
<body class="bg-stone-50 dark:bg-gray-900 text-gray-800 dark:text-stone-200 transition-colors duration-300">

    <!-- ========== HEADER ========== -->
    <header id="header" class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-md sticky top-0 z-40 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-3">
                <!-- Informações da Empresa e Botão de Menu (Mobile) -->
                <div class="flex items-center min-w-0">
                    <!-- Botão de Menu para Celular -->
                    <button id="category-drawer-button" class="md:hidden mr-3 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 transition-colors">
                        <i class="fas fa-bars text-xl text-[#0033A0] dark:text-[#FFD100]"></i>
                    </button>
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSstW2GDUT9pYlm_O6_a0qewvhTtHI4W7X6XQ&s" alt="Logo do CAFÉ YPIRANGA" class="w-12 h-12 rounded-full mr-4 border-2 border-stone-200 dark:border-gray-600 flex-shrink-0 object-cover">
                    <div class="min-w-0">
                        <h1 class="text-xl sm:text-2xl font-bold text-[#0033A0] dark:text-[#FFD100] truncate">CAFÉ YPIRANGA</h1>
                        <div class="flex items-center space-x-4 mt-1">
                            <a href="https://api.whatsapp.com/send?phone=554532681492" target="_blank" aria-label="WhatsApp" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-whatsapp text-xl"></i></a>
                            <a href="https://www.instagram.com/postorabaioli" target="_blank" aria-label="Instagram" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-instagram text-xl"></i></a>
                            <a href="https://www.facebook.com/Posto Rabaioli" target="_blank" aria-label="Facebook" class="text-gray-600 dark:text-gray-400 hover:text-[#0033A0] dark:hover:text-[#FFD100] transition-colors"><i class="fab fa-facebook-f text-xl"></i></a>
                        </div>
                    </div>
                </div>

                <!-- Seletor de Tema -->
                <label for="theme-toggle" class="relative inline-flex items-center cursor-pointer flex-shrink-0 ml-2">
                    <input type="checkbox" value="" id="theme-toggle" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 dark:peer-focus:ring-yellow-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#0033A0]"></div>
                </label>
            </div>
        </div>

        <!-- Navegação de Categorias (Desktop) -->
        <nav id="category-nav" class="hidden md:flex bg-[#0033A0] dark:bg-blue-900/80 overflow-x-auto whitespace-nowrap shadow-inner">
            <div id="category-links-desktop" class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 flex list-none py-2 space-x-2">
                <!-- Links de categoria serão inseridos aqui pelo JS -->
            </div>
        </nav>
    </header>

    <!-- ========== CONTEÚDO PRINCIPAL ========== -->
    <main id="menu-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <!-- Seções e produtos serão inseridos aqui pelo JS -->
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="bg-gray-800 dark:bg-black text-gray-300 dark:text-gray-400 py-6 text-center">
        <p>&copy; 2024 CAFÉ YPIRANGA. Todos os direitos reservados.</p>
        <p class="text-xs mt-1">Desenvolvido com ❤️</p>
    </footer>

    <!-- ========== BOTÃO VOLTAR AO TOPO ========== -->
    <button id="back-to-top" aria-label="Voltar ao topo" class="hidden fixed bottom-5 right-5 bg-[#0033A0] hover:bg-blue-800 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-lg cursor-pointer z-50 transition-all duration-300 active:scale-90">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <!-- ========== GAVETA DE CATEGORIAS (MOBILE) ========== -->
    <div id="category-drawer" class="hidden fixed inset-0 z-50">
        <!-- Fundo Escuro (Backdrop) -->
        <div id="drawer-backdrop" class="fixed inset-0 bg-black/50 animate-fade-in"></div>
        <!-- Conteúdo da Gaveta -->
        <div class="relative w-4/5 max-w-sm h-full bg-stone-50 dark:bg-gray-900 shadow-xl flex flex-col animate-slide-in">
            <div class="flex items-center justify-between p-4 border-b border-stone-200 dark:border-gray-700">
                <h2 class="text-xl font-bold text-[#0033A0] dark:text-[#FFD100]">Categorias</h2>
                <button id="close-drawer-button" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <nav id="category-links-mobile" class="flex-1 overflow-y-auto">
                <!-- Links de categoria para mobile serão inseridos aqui -->
            </nav>
        </div>
    </div>

    <!-- ========== MODAL DE PRODUTO ========== -->
    <div id="product-modal" class="hidden fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4">
        <div id="modal-content" class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full relative p-6 m-4 animate-fade-in">
            <button class="close-button absolute top-3 right-4 text-gray-500 dark:text-gray-400 text-3xl font-bold hover:text-black dark:hover:text-white cursor-pointer">&times;</button>
            <img id="modal-image" src="" alt="Imagem do Produto" class="w-full h-64 object-cover rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x260/EEE/333?text=Imagem+Indisponível';">
            <h3 id="modal-name" class="text-3xl font-bold mb-2 text-[#0033A0] dark:text-[#FFD100]"></h3>
            <p id="modal-description" class="text-base text-gray-600 dark:text-gray-400 mb-4 min-h-[40px]"></p>
            <span id="modal-price" class="price text-2xl font-bold text-[#0033A0] dark:text-[#FFD100]"></span>
        </div>
    </div>
    
    <!-- Template para o cartão de produto (Layout de Lista) -->
    <template id="product-card-template">
        <div class="product-card flex items-start space-x-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1 transition-all duration-300 cursor-pointer group active:scale-[0.98]">
            <img loading="lazy" alt="" class="w-24 h-24 md:w-28 md:h-28 object-cover rounded-md flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/112x112/EEE/333?text=Imagem';">
            <div class="flex-1 flex flex-col h-full">
                <h3 class="text-lg font-bold mb-1 truncate group-hover:text-[#0033A0] dark:group-hover:text-[#FFD100]"></h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2 text-ellipsis overflow-hidden" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;"></p>
                <div class="mt-auto">
                    <span class="price text-xl font-extrabold text-[#0033A0] dark:text-[#FFD100]"></span>
                </div>
            </div>
        </div>
    </template>


    <!-- ========== SCRIPT ========== -->
    <script>
    (() => {
        // Objeto de dados do menu, centralizando todas as informações.
        const menuData = {
            "Cafés": {"emoji": "☕️", "items": [{"name":"ESPRESSO","description":"Café puro","price":"R$ 9,50","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/a2073e59-6ea5-4f7d-a523-5a986f3fed6d.webp"},{ "name": "EXPRESSO DUPLO", "description": "Duplo expresso", "price": "R$ 11,00", "image": "https://placehold.co/300x200/EEE/333?text=Expresso+Duplo" }]},
            "Cappuccinos": {"emoji": "☕️", "items": [{"name":"TRADICIONAL","description":"Café, leite vaporizado e canela","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/8238a6b1-78f0-41ca-a84b-61cbb0f06d5c.webp"},{"name":"BRASILEIRO","description":"Café, chocolate, leite vaporizado e canela","price":"R$ 13,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f0566d3f-6448-44e7-b52d-e38ac795849a.webp"}]},
            "Especiais": {"emoji": "⭐", "items": [{"name":"MOCHA CARAMELO","description":"Café, calda de caramelo e leite vaporizado","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/d1c92e5a-4d67-445d-be9e-f94e9a70776c.webp"},{"name":"MOCHA CHOCOLATE","description":"Café, calda de chocolate e leite vaporizado","price":"R$ 12,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f8c80c9a-1c4f-49b3-84b4-b23a9e850466.webp"}]},
            "Chocolates": {"emoji": "🍫", "items": [{"name":"CHOCOLATE EUROPEU","description":"Leite e chocolate europeu","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/f5d40bef-fff7-427c-b7a5-b37feea67981.webp"}]},
            "Chás": {"emoji": "🍵", "items": [{"name":"CAMOMILA","description":"Infusão suave e calmante de flores de camomila, ideal para relaxar a qualquer hora do dia.","price":"R$ 7,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/7205cf78-45ff-4e3c-9133-5b8d3f4d0767.webp"}]},
            "Cafés Gelados": {"emoji": "🧊", "items": [{"name":"AFFOGATO","description":"Café, sorvete de creme, ovomaltine e chantilly.","price":"R$ 17,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/a4f8da25-e26b-43ad-a18a-ecf9c4eac4d8.webp"}]},
            "Pizzas": {"emoji": "🍕", "items": [{"name":"PORTUGUESA","description":"Molho de tomate, mussarela, presunto, ovos, azeitona verde, cebola e orégano.","price":"R$ 59,00","image":"https://olaclick-assets-prod.s3.amazonaws.com/companies/products/images/150/10920976-cf74-4945-9ea2-abe6b0578890.webp"}]}
        };

        /** Gera o ID de uma categoria para ser usado em seletores CSS. Ex: "Cafés Gelados" -> "cafes-gelados" */
        const generateCategoryId = (name) => name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(/\s+/g, '-');

        /** Renderiza o menu completo na página. */
        const renderMenu = () => {
            const menuContainer = document.getElementById('menu-container');
            const desktopLinksContainer = document.getElementById('category-links-desktop');
            const mobileLinksContainer = document.getElementById('category-links-mobile');
            const productCardTemplate = document.getElementById('product-card-template');

            // Limpa containers para evitar duplicatas
            menuContainer.innerHTML = '';
            desktopLinksContainer.innerHTML = '';
            mobileLinksContainer.innerHTML = '';

            for (const categoryName in menuData) {
                const category = menuData[categoryName];
                const categoryId = generateCategoryId(categoryName);

                // 1. Cria link para o menu Desktop (horizontal)
                const navLinkDesktop = document.createElement('a');
                navLinkDesktop.href = `#${categoryId}`;
                navLinkDesktop.className = "block shrink-0 py-2 px-4 text-white font-medium rounded-full transition-all duration-300 hover:bg-[#FFD100] hover:text-[#0033A0]";
                navLinkDesktop.innerHTML = `${category.emoji} ${categoryName}`;
                desktopLinksContainer.appendChild(navLinkDesktop);
                
                // 2. Cria link para a gaveta Mobile (vertical)
                const navLinkMobile = document.createElement('a');
                navLinkMobile.href = `#${categoryId}`;
                navLinkMobile.className = "block text-lg font-medium p-4 transition-colors duration-300 hover:bg-gray-200 dark:hover:bg-gray-700 w-full text-left";
                navLinkMobile.innerHTML = `${category.emoji} ${categoryName}`;
                mobileLinksContainer.appendChild(navLinkMobile);

                // 3. Cria a seção da categoria
                const section = document.createElement('section');
                section.id = categoryId;
                section.className = 'category-section pt-24 -mt-24 mb-12 scroll-mt-24';
                
                const title = document.createElement('h2');
                title.className = 'text-3xl font-bold mb-6 pb-2 border-b-2 border-[#0033A0] dark:border-[#FFD100]';
                title.innerHTML = `${category.emoji} ${categoryName}`;
                section.appendChild(title);

                // 4. Cria o container para os produtos em lista
                const listContainer = document.createElement('div');
                listContainer.className = 'space-y-4';
                
                // 5. Adiciona os produtos ao container
                category.items.forEach(product => {
                    const cardClone = productCardTemplate.content.cloneNode(true);
                    const cardElement = cardClone.querySelector('.product-card');

                    cardElement.dataset.name = product.name;
                    cardElement.dataset.description = product.description;
                    cardElement.dataset.price = product.price;
                    cardElement.dataset.image = product.image;

                    cardElement.querySelector('img').src = product.image;
                    cardElement.querySelector('img').alt = product.name;
                    cardElement.querySelector('h3').textContent = product.name;
                    cardElement.querySelector('p').textContent = product.description;
                    cardElement.querySelector('.price').textContent = product.price;
                    
                    listContainer.appendChild(cardElement);
                });
                section.appendChild(listContainer);
                menuContainer.appendChild(section);
            }
        };

        /** Controla o seletor de tema (claro/escuro) */
        const initTheme = () => { /* ...código inalterado... */ };

        /** Controla a gaveta de categorias (mobile) */
        const initCategoryDrawer = () => {
            const drawer = document.getElementById('category-drawer');
            const openButton = document.getElementById('category-drawer-button');
            const closeButton = document.getElementById('close-drawer-button');
            const backdrop = document.getElementById('drawer-backdrop');
            const mobileLinks = document.querySelectorAll('#category-links-mobile a');

            const openDrawer = () => drawer.classList.remove('hidden');
            const closeDrawer = () => drawer.classList.add('hidden');

            openButton.addEventListener('click', openDrawer);
            closeButton.addEventListener('click', closeDrawer);
            backdrop.addEventListener('click', closeDrawer);
            mobileLinks.forEach(link => link.addEventListener('click', closeDrawer));
        };
        
        /** Controla o modal de produto */
        const initModal = () => { /* ...código inalterado... */ };

        /** Controla o botão "Voltar ao Topo" */
        const initBackToTopButton = () => { /* ...código inalterado... */ };

        /** Controla o destaque do link da categoria ativa na navegação (Desktop) */
        const initScrollObserver = () => {
            const header = document.getElementById('header');
            const categoryNav = document.getElementById('category-nav');
            const sections = document.querySelectorAll('.category-section');
            const navLinks = document.querySelectorAll('#category-links-desktop a');

            if (!header || !categoryNav || sections.length === 0 || navLinks.length === 0) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        const activeLink = document.querySelector(`#category-links-desktop a[href="#${id}"]`);
                        
                        navLinks.forEach(link => link.classList.remove('bg-[#FFD100]', 'text-[#0033A0]', 'dark:bg-yellow-400', 'dark:text-blue-900', 'shadow-md'));
                        
                        if (activeLink) {
                            activeLink.classList.add('bg-[#FFD100]', 'text-[#0033A0]', 'dark:bg-yellow-400', 'dark:text-blue-900', 'shadow-md');
                            activeLink.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                        }
                    }
                });
            }, {
                rootMargin: `-${header.offsetHeight}px 0px -40% 0px`,
                threshold: 0.1
            });

            sections.forEach(section => observer.observe(section));
        };
        
        // --- PONTO DE PARTIDA ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            initTheme();
            initModal();
            initCategoryDrawer();
            initBackToTopButton();
            initScrollObserver();
        });

        // Reatribuindo as funções de inicialização para o escopo global para que não se percam dentro do IIFE
        // (Isso é uma simplificação. Em um projeto maior, usaríamos módulos ou um objeto global)
        const functionsToPreserve = { initTheme, initModal, initBackToTopButton };
        for (const funcName in functionsToPreserve) {
            if (typeof window[funcName] === 'undefined') {
                window[funcName] = functionsToPreserve[funcName];
            }
        }
        
    })();
    </script>
</body>
</html>
